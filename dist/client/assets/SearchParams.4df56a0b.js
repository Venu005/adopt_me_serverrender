import{j as i,L as N,a,r as m,A as j}from"./index.efbdc0b9.js";import{u as v}from"./useQuery.esm.7fc5e6d0.js";const w=n=>{const{name:e,animal:o,breed:r,images:s,location:l,id:h}=n;let c="http://pets-images.dev-apis.com/pets/none.jpg";return s.length&&(c=s[0]),i(N,{to:`/details/${h}`,className:"pet",children:[a("div",{className:"image-container",children:a("img",{src:c,alt:e})}),i("div",{className:"info",children:[a("h1",{children:e}),a("h2",{children:`${o} \u2014 ${r} \u2014 ${l}`})]})]})},L=({pets:n})=>a("div",{className:"search",children:n.length?n.map(e=>a(w,{animal:e.animal,name:e.name,breed:e.breed,images:e.images,location:`${e.city}, ${e.state}`,id:e.id},e.id)):a("h1",{children:"No pets found"})}),S=async({queryKey:n})=>{const e=n[1];if(!e)return[];const o=await fetch(`http://pets-v2.dev-apis.com/breeds?animal=${e}`);if(!o.ok)throw new Error("breeds/${animal} fetch not ok");return o.json()};function A(n){var o,r;const e=v(["breeds",n],S);return[(r=(o=e==null?void 0:e.data)==null?void 0:o.breeds)!=null?r:[],e.status]}async function P({queryKey:n}){const{animal:e,location:o,breed:r}=n[1],s=await fetch(`http://pets-v2.dev-apis.com/pets?animal=${e}&location=${o}&breed=${r}`);if(!s.ok)throw new Error(`pet search not okay: ${e}, ${o}, ${r}`);return s.json()}const k=["bird","cat","dog","rabbit","reptile"],F=()=>{var u,p;const[n,e]=m.exports.useState({location:"",animal:"",breed:""}),[o,r]=m.exports.useState(""),[s]=A(o),[l,h]=m.exports.useContext(j),c=v(["search",n],P),$=(p=(u=c==null?void 0:c.data)==null?void 0:u.pets)!=null?p:[];return i("div",{className:"search-params",children:[i("form",{onSubmit:t=>{var b,g,f;t.preventDefault();const d=new FormData(t.target),x={animal:(b=d.get("animal"))!=null?b:"",breed:(g=d.get("breed"))!=null?g:"",location:(f=d.get("location"))!=null?f:""};e(x)},children:[l?a("div",{className:"pet image-container",children:a("img",{src:l.images[0],alt:l.name})}):null,i("label",{htmlFor:"location",children:["Location",a("input",{id:"location",name:"location",placeholder:"Location"})]}),i("label",{htmlFor:"animal",children:["Animal",i("select",{id:"animal",name:"animal",onChange:t=>{r(t.target.value)},onBlur:t=>{r(t.target.value)},children:[a("option",{}),k.map(t=>a("option",{value:t,children:t},t))]})]}),i("label",{htmlFor:"breed",children:["Breed",i("select",{disabled:!s.length,id:"breed",name:"breed",children:[a("option",{}),s.map(t=>a("option",{value:t,children:t},t))]})]}),a("button",{children:"Submit"})]}),a(L,{pets:$})]})};export{F as default};
